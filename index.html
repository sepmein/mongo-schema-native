<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Mould.js by sepmein</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Mould.js</h1>
      <h2 class="project-tagline">A database level schema designer for using mongodb in nodejs.</h2>
      <a href="https://github.com/sepmein/mouldjs" class="btn">View on GitHub</a>
      <a href="https://github.com/sepmein/mouldjs/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/sepmein/mouldjs/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="mouldjs" class="anchor" href="#mouldjs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Mould.js</h1>

<h2>
<a id="define-schema-on-database-level" class="anchor" href="#define-schema-on-database-level" aria-hidden="true"><span class="octicon octicon-link"></span></a>Define Schema on Database level.</h2>

<p><a href="https://docs.mongodb.org/v3.2/core/document-validation/">Document validation</a> has been introduced to <a href="http://mongodb.org">MongoDb</a> since version 3.2 . Before that, we could only define schema on application level.</p>

<h3>
<a id="differences-between-mouldjs-and-mongoose" class="anchor" href="#differences-between-mouldjs-and-mongoose" aria-hidden="true"><span class="octicon octicon-link"></span></a>Differences between Mould.js and Mongoose</h3>

<table>
<thead>
<tr>
<th align="center">Feature</th>
<th align="center">Mongoose</th>
<th align="center">Mould.js</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Schema Level</td>
<td align="center">Application</td>
<td align="center">Database</td>
</tr>
<tr>
<td align="center">Features</td>
<td align="center">Full</td>
<td align="center">Minimal</td>
</tr>
</tbody>
</table>

<h3>
<a id="get-started-with-database-level-schema-validation" class="anchor" href="#get-started-with-database-level-schema-validation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Get Started with Database Level Schema Validation</h3>

<blockquote>
<p><strong>Attention</strong>: <code>mongodb</code> version &gt;= 3.2 required</p>
</blockquote>

<ul>
<li><strong>Installation</strong></li>
</ul>

<pre><code>npm install mouldjs --save
</code></pre>

<ul>
<li><strong>Define Schema</strong></li>
</ul>

<div class="highlight highlight-source-js"><pre><span class="pl-k">let</span> Schema <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>mouldjs<span class="pl-pds">'</span></span>)
<span class="pl-k">let</span> userSchema <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Schema</span>({
    name  <span class="pl-k">:</span> {$type<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>string<span class="pl-pds">'</span></span>, $exists<span class="pl-k">:</span> <span class="pl-c1">true</span>},
    age   <span class="pl-k">:</span> {$type<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>int<span class="pl-pds">'</span></span>, $lt<span class="pl-k">:</span> <span class="pl-c1">200</span>},
    email <span class="pl-k">:</span> {$regex<span class="pl-k">:</span> \<span class="pl-s"><span class="pl-pds">"</span>^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+<span class="pl-cce">\.</span>[a-zA-Z0-9-.]+$<span class="pl-pds">"</span></span>\} 
    sex   <span class="pl-k">:</span> {$in<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>male<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>female<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>unknown<span class="pl-pds">'</span></span>]}
});</pre></div>

<blockquote>
<p>check full <a href="/#schema-lists">schema lists</a>.</p>
</blockquote>

<ul>
<li><strong>Apply To Db</strong></li>
</ul>

<div class="highlight highlight-source-js"><pre><span class="pl-c">//with callback</span>
<span class="pl-smi">userSchema</span>.<span class="pl-en">applyTo</span>(db, collection, <span class="pl-k">function</span>(<span class="pl-smi">done</span>){
    <span class="pl-k">if</span>(<span class="pl-smi">done</span>.<span class="pl-smi">ok</span>) {...}
});
<span class="pl-c">//with promise</span>
<span class="pl-smi">userSchema</span>.<span class="pl-en">applyTo</span>(db, collection).<span class="pl-en">then</span>(...);</pre></div>

<blockquote>
<p><a href="/#apis">api docs</a></p>
</blockquote>

<hr>

<h3>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Api</h3>

<h3>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h3>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/sepmein/mouldjs">Mould.js</a> is maintained by <a href="https://github.com/sepmein">sepmein</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-71807007-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
